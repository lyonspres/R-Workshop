---
title: "R Workshop"
author: "Preston Lyons"
date: "02/05/2021"
output: html_document
---

```{r libraries}
library("tidyverse")
library("haven")
install.packages("psych")
library("psych")
library("dplyr")
library("tidyr")
```

```{r datadownloaded}
df <- read_sav("mortality_workshop.sav")
```

```{r checkdata}
## Number of Rows
nrow(df)
## Number of columns
ncol(df)
## Dimensionality of datafram/datamatrix
dim(df)
## Lists the variable names
names(df)
## Shows overview of dataframe (from tidyverse)
glimpse(df)
## lists the top cases and variable names
head(df)
## lists the class of data structure
class(df)
## summary
summary(df)
```

```{r reorganise}
## Rename variables
### (df, New name = Current Name)
df <- rename(df, gender_fine = gender)
summary(df)
```

```{r Selectandfilter}
filter(df, mort_12 < 18)
filter(df, mort_12 < 3 & gender_fine == 1)
## selecting by column:
select(df, age)
## also df$age
## also df["age"]

## Creating Columns
df$id <- 1:nrow(df)

## Na.rm takes the answers that it has, and creates an average, so that it doesn't assume a lack of an answer as an answer in itself

df$extr <- rowMeans(df[c("bfi_1", "bfi_6", "bfi_11")],
                    na.rm = T)

## Some basic cleaning help
install.packages("careless")
library("careless")
longstring(df)
hist(irv(df))
```


