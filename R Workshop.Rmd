---
title: "R Workshop"
author: "Preston Lyons"
date: "02/05/2021"
output: html_document
---

```{r libraries}
library("tidyverse")
library("haven")
install.packages("psych")
library("psych")
library("dplyr")
library("tidyr")
```

```{r datadownloaded}
df <- read_sav("mortality_workshop.sav")
```

```{r checkdata}
## Number of Rows
nrow(df)
## Number of columns
ncol(df)
## Dimensionality of datafram/datamatrix
dim(df)
## Lists the variable names
names(df)
## Shows overview of dataframe (from tidyverse)
glimpse(df)
## lists the top cases and variable names
head(df)
## lists the class of data structure
class(df)
## summary
summary(df)
```

```{r reorganise}
## Rename variables
### (df, New name = Current Name)
df <- rename(df, gender_fine = gender)
summary(df)
```

```{r Selectandfilter}
filter(df, mort_12 < 18)
filter(df, mort_12 < 3 & gender_fine == 1)
## selecting by column:
select(df, age)
## also df$age
## also df["age"]

## Creating Columns
df$id <- 1:nrow(df)

## Na.rm takes the answers that it has, and creates an average, so that it doesn't assume a lack of an answer as an answer in itself

df$extr <- rowMeans(df[c("bfi_1", "bfi_6", "bfi_11")],
                    na.rm = T)

## Some basic cleaning help
install.packages("careless")
library("careless")
longstring(df)
hist(irv(df))
```

```{r ongoingongoing}
## Recording
### Re-code the below column so the responses are logical, flipping around the data as we go essentially

library(car)
df$bfi_1 <- recode(df$bfi_1, "1 = 5; 2 = 4; 3 = 4; 4 = 2; 5= 1")

## Data Types 

## Vectors are unidimensional contructs of columns or rows as columns, can be numbers, symbols etc, and are hierarchically stacked (a - d) and unidirectional (Implicit [chain of] Coercion) see below:

###Logical Vector
a <- c(TRUE, TRUE, FALSE)

### Integer Vector
b <- c(1L, 2L, 3L)

### Double Vector

c <- c()
  
### Complex Vecotr

d <- c()
  
### Character Vector
  
e <- C()

## Manipulating Data in Vector

h1 <- c(1,2,3)
h2 <- c(4,5,6)

h1 + h2
h1 * h2

### We can glue vectors together

c(h1,h2)

## Accessing Data in Vectors 

h6 <- c(1,2,3,4,5,6)
h6[1]
h6[1:4]

# Matrices

## Matrices are like Vectors, but cool, they're multi-dimensional "Chad-Vectors", m-by-n matrix is rectangular and come with rows and columns

### need to say "byrow" so it fills left to right by row and not by prioritising columns

### in square brackets: number comma == matrix row; comma number == matrix column

## Data Frame

dv1 <- c(TRUE,FALSE,TRUE)
dv2 <- c(1,2,3)
dv3 <- 
  
### Matrices can only have one data type, so it coerces hieracically like vectors do earlier - however data frames can be different data types:
  
cbind.data.frame(dv1,dv2,dv3)
```








